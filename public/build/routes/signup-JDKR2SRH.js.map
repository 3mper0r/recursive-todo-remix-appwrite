{
  "version": 3,
  "sources": ["../../../app/routes/signup.tsx"],
  "sourcesContent": ["// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/routes/signup.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/routes/signup.tsx\");\n  import.meta.hot.lastModified = \"1770223252513.5278\";\n}\n// REMIX HMR END\n\nimport { useActionData, Form, useNavigation } from \"@remix-run/react\";\nimport { redirect, json } from \"@remix-run/node\";\nimport { ID } from \"appwrite\";\nimport { createAppwriteAccount, createAppwriteSession } from \"../lib/appwrite-auth.server\";\nexport const action = async ({\n  request\n}) => {\n  console.log('!!! SIGNUP ACTION CALLED !!!');\n  try {\n    const formData = await request.formData();\n    const email = formData.get(\"email\");\n    const password = formData.get(\"password\");\n    console.log('Form data:', {\n      email,\n      password: '***'\n    });\n    if (!email || !password) {\n      return json({\n        error: \"Email and password are required\"\n      }, {\n        status: 400\n      });\n    }\n    console.log('Step 1: Creating account...');\n    try {\n      // Create account\n      await createAppwriteAccount(email, password, ID.unique());\n      console.log('Step 2: Account created successfully');\n    } catch (accountError) {\n      console.error('Account creation error:', accountError);\n      return json({\n        error: accountError.message || \"Failed to create account\"\n      }, {\n        status: 400\n      });\n    }\n    console.log('Step 3: Creating session...');\n    let sessionCookies;\n    try {\n      // Create session\n      sessionCookies = await createAppwriteSession(email, password);\n      console.log('Step 4: Session created, cookies:', sessionCookies);\n    } catch (sessionError) {\n      console.error('Session creation error:', sessionError);\n      return json({\n        error: sessionError.message || \"Account created but login failed\"\n      }, {\n        status: 500\n      });\n    }\n    if (!sessionCookies || sessionCookies.length === 0) {\n      console.error('No session cookies received');\n      return json({\n        error: \"Login failed - no session\"\n      }, {\n        status: 500\n      });\n    }\n    console.log('Step 5: Redirecting to /todos');\n\n    // Create headers with all cookies\n    const headers = new Headers();\n    sessionCookies.forEach(cookie => {\n      headers.append(\"Set-Cookie\", cookie);\n    });\n    return redirect(\"/todos\", {\n      headers\n    });\n  } catch (error) {\n    console.error('Unexpected error in signup action:', error);\n    console.error('Error stack:', error.stack);\n    return json({\n      error: error.message || \"An unexpected error occurred\"\n    }, {\n      status: 500\n    });\n  }\n};\nexport default function SignupPage() {\n  _s();\n  const actionData = useActionData();\n  const navigation = useNavigation();\n  const isSubmitting = navigation.state === \"submitting\";\n  return <div style={{\n    maxWidth: 420,\n    margin: \"80px auto\",\n    textAlign: \"center\"\n  }}>\n      <h1>Create account</h1>\n      <Form method=\"post\">\n        <input name=\"email\" type=\"email\" required placeholder=\"Email\" />\n        <br />\n        <input name=\"password\" type=\"password\" required placeholder=\"Password\" />\n        <br />\n        {actionData?.error && <p style={{\n        color: \"red\"\n      }}>{actionData.error}</p>}\n        <button type=\"submit\" disabled={isSubmitting}>\n          {isSubmitting ? \"Creating account...\" : \"Sign up\"}\n        </button>\n      </Form>\n      <p>\n        Already have an account? <a href=\"/\">Log in</a>\n      </p>\n    </div>;\n}\n_s(SignupPage, \"e3rMULficn7ldQYYArv00m53mwQ=\", false, function () {\n  return [useActionData, useNavigation];\n});\n_c = SignupPage;\nvar _c;\n$RefreshReg$(_c, \"SignupPage\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;AAsBA,kBAA+B;AAE/B,2BAA6D;AAqFvD;AA5GN,IAAI,CAAC,OAAO,gBAAgB,CAAC,OAAO,gBAAgB,CAAC,OAAO,kBAAkB;AAC5E,UAAQ,KAAK,kGAAkG;AACjH,OAAO;AACD,mBAAiB,OAAO;AACxB,mBAAiB,OAAO;AAC5B,SAAO,eAAe,CAAC,MAAM,OAAO;AAClC,WAAO,iBAAiB,SAAS,MAAM,4BAA8B,EAAE;AAAA,EACzE;AACA,SAAO,eAAe,OAAO,iBAAiB;AAChD;AANM;AACA;AAMN,IAAI,KAAK,aAAa;AAEtB,IAAI,aAAa;AACf,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EAAuB;AACvB,cAAY,IAAI,eAAe;AACjC;AAiFe,SAAR,aAA8B;AACnC,KAAG;AACH,QAAM,aAAa,cAAc;AACjC,QAAM,aAAa,cAAc;AACjC,QAAM,eAAe,WAAW,UAAU;AAC1C,SAAO,mDAAC,SAAI,OAAO;AAAA,IACjB,UAAU;AAAA,IACV,QAAQ;AAAA,IACR,WAAW;AAAA,EACb,GACI;AAAA,uDAAC,QAAG,8BAAJ;AAAA;AAAA;AAAA;AAAA,WAAkB;AAAA,IAClB,mDAAC,QAAK,QAAO,QACX;AAAA,yDAAC,WAAM,MAAK,SAAQ,MAAK,SAAQ,UAAQ,MAAC,aAAY,WAAtD;AAAA;AAAA;AAAA;AAAA,aAA8D;AAAA,MAC9D,mDAAC,UAAD;AAAA;AAAA;AAAA;AAAA,aAAI;AAAA,MACJ,mDAAC,WAAM,MAAK,YAAW,MAAK,YAAW,UAAQ,MAAC,aAAY,cAA5D;AAAA;AAAA;AAAA;AAAA,aAAuE;AAAA,MACvE,mDAAC,UAAD;AAAA;AAAA;AAAA;AAAA,aAAI;AAAA,MACH,YAAY,SAAS,mDAAC,OAAE,OAAO;AAAA,QAChC,OAAO;AAAA,MACT,GAAI,qBAAW,SAFS;AAAA;AAAA;AAAA;AAAA,aAEH;AAAA,MACnB,mDAAC,YAAO,MAAK,UAAS,UAAU,cAC7B,yBAAe,wBAAwB,aAD1C;AAAA;AAAA;AAAA;AAAA,aAEA;AAAA,SAVF;AAAA;AAAA;AAAA;AAAA,WAWA;AAAA,IACA,mDAAC,OAAE;AAAA;AAAA,MACwB,mDAAC,OAAE,MAAK,KAAI,sBAAZ;AAAA;AAAA;AAAA;AAAA,aAAkB;AAAA,SAD7C;AAAA;AAAA;AAAA;AAAA,WAEA;AAAA,OApBG;AAAA;AAAA;AAAA;AAAA,SAqBL;AACJ;AACA,GAAG,YAAY,gCAAgC,OAAO,WAAY;AAChE,SAAO,CAAC,eAAe,aAAa;AACtC,CAAC;AACD,KAAK;AACL,IAAI;AACJ,aAAa,IAAI,YAAY;AAE7B,OAAO,eAAe;AACtB,OAAO,eAAe;",
  "names": []
}
