{
  "version": 3,
  "sources": ["../../../app/routes/_index.tsx"],
  "sourcesContent": ["// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/routes/_index.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/routes/_index.tsx\");\n  import.meta.hot.lastModified = \"1770222100424.7285\";\n}\n// REMIX HMR END\n\nimport { useActionData, Form, useNavigation } from \"@remix-run/react\";\nimport { redirect, json } from \"@remix-run/node\";\nimport { createAppwriteSession } from \"../lib/appwrite-auth.server\";\nexport const action = async ({\n  request\n}) => {\n  const formData = await request.formData();\n  const email = formData.get(\"email\");\n  const password = formData.get(\"password\");\n  console.log('Login attempt for:', email);\n  try {\n    const sessionCookies = await createAppwriteSession(email, password);\n    console.log('Session cookies received:', sessionCookies);\n    if (!sessionCookies || sessionCookies.length === 0) {\n      console.error('No session cookies received');\n      return json({\n        error: \"Login failed - no session created\"\n      }, {\n        status: 500\n      });\n    }\n    console.log('Redirecting to /todos with cookies');\n\n    // Create headers with all cookies\n    const headers = new Headers();\n    sessionCookies.forEach(cookie => {\n      headers.append(\"Set-Cookie\", cookie);\n    });\n    return redirect(\"/todos\", {\n      headers\n    });\n  } catch (error) {\n    console.error('Login error:', error);\n    return json({\n      error: \"Invalid email or password\"\n    }, {\n      status: 401\n    });\n  }\n};\nexport default function IndexPage() {\n  _s();\n  const actionData = useActionData();\n  const navigation = useNavigation();\n  const isSubmitting = navigation.state === \"submitting\";\n  return <div style={{\n    maxWidth: 420,\n    margin: \"80px auto\",\n    textAlign: \"center\"\n  }}>\n      <h1>Recursive To-Do App</h1>\n      <p>Log in to see your todos</p>\n      <Form method=\"post\">\n        <input name=\"email\" type=\"email\" required />\n        <input name=\"password\" type=\"password\" required />\n        {actionData?.error && <p style={{\n        color: \"red\"\n      }}>{actionData.error}</p>}\n        <button type=\"submit\" disabled={isSubmitting}>\n          {isSubmitting ? \"Logging in...\" : \"Log in\"}\n        </button>\n      </Form>\n      <p>\n        No account? <a href=\"/signup\">Sign up</a>\n      </p>\n    </div>;\n}\n_s(IndexPage, \"e3rMULficn7ldQYYArv00m53mwQ=\", false, function () {\n  return [useActionData, useNavigation];\n});\n_c = IndexPage;\nvar _c;\n$RefreshReg$(_c, \"IndexPage\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;AAsBA,kBAA+B;AAC/B,2BAAsC;AAgDhC;AAtEN,IAAI,CAAC,OAAO,gBAAgB,CAAC,OAAO,gBAAgB,CAAC,OAAO,kBAAkB;AAC5E,UAAQ,KAAK,kGAAkG;AACjH,OAAO;AACD,mBAAiB,OAAO;AACxB,mBAAiB,OAAO;AAC5B,SAAO,eAAe,CAAC,MAAM,OAAO;AAClC,WAAO,iBAAiB,SAAS,MAAM,4BAA8B,EAAE;AAAA,EACzE;AACA,SAAO,eAAe,OAAO,iBAAiB;AAChD;AANM;AACA;AAMN,IAAI,KAAK,aAAa;AAEtB,IAAI,aAAa;AACf,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EAAuB;AACvB,cAAY,IAAI,eAAe;AACjC;AA2Ce,SAAR,YAA6B;AAClC,KAAG;AACH,QAAM,aAAa,cAAc;AACjC,QAAM,aAAa,cAAc;AACjC,QAAM,eAAe,WAAW,UAAU;AAC1C,SAAO,mDAAC,SAAI,OAAO;AAAA,IACjB,UAAU;AAAA,IACV,QAAQ;AAAA,IACR,WAAW;AAAA,EACb,GACI;AAAA,uDAAC,QAAG,mCAAJ;AAAA;AAAA;AAAA;AAAA,WAAuB;AAAA,IACvB,mDAAC,OAAE,wCAAH;AAAA;AAAA;AAAA;AAAA,WAA2B;AAAA,IAC3B,mDAAC,QAAK,QAAO,QACX;AAAA,yDAAC,WAAM,MAAK,SAAQ,MAAK,SAAQ,UAAQ,QAAzC;AAAA;AAAA;AAAA;AAAA,aAA0C;AAAA,MAC1C,mDAAC,WAAM,MAAK,YAAW,MAAK,YAAW,UAAQ,QAA/C;AAAA;AAAA;AAAA;AAAA,aAAgD;AAAA,MAC/C,YAAY,SAAS,mDAAC,OAAE,OAAO;AAAA,QAChC,OAAO;AAAA,MACT,GAAI,qBAAW,SAFS;AAAA;AAAA;AAAA;AAAA,aAEH;AAAA,MACnB,mDAAC,YAAO,MAAK,UAAS,UAAU,cAC7B,yBAAe,kBAAkB,YADpC;AAAA;AAAA;AAAA;AAAA,aAEA;AAAA,SARF;AAAA;AAAA;AAAA;AAAA,WASA;AAAA,IACA,mDAAC,OAAE;AAAA;AAAA,MACW,mDAAC,OAAE,MAAK,WAAU,uBAAlB;AAAA;AAAA;AAAA;AAAA,aAAyB;AAAA,SADvC;AAAA;AAAA;AAAA;AAAA,WAEA;AAAA,OAnBG;AAAA;AAAA;AAAA;AAAA,SAoBL;AACJ;AACA,GAAG,WAAW,gCAAgC,OAAO,WAAY;AAC/D,SAAO,CAAC,eAAe,aAAa;AACtC,CAAC;AACD,KAAK;AACL,IAAI;AACJ,aAAa,IAAI,WAAW;AAE5B,OAAO,eAAe;AACtB,OAAO,eAAe;",
  "names": []
}
